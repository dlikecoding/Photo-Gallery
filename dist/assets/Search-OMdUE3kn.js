import{b as B,f as G,c as M,o as P,a as u,t as g,i,l as y,d,e as l,s as S,F as H,A as F,m as T,n as K}from"./index-BvSQAnfI.js";import{s as j}from"./Setting.module-DgUIRGu_.js";import{d as D,e as U}from"./fetching-CJXmvtht.js";import{u as z}from"./ManageUrl-C3xxHPBd.js";import{b as O}from"./svgIcons-CL4uA8j0.js";import{H as W}from"./Header-9gxCup_c.js";const Y="_resultsCard_1c0aq_13",J="_groupSearch_1c0aq_18",Q="_clearBtn_1c0aq_49",V="_searchResult_1c0aq_69",X="_suggestionBtn_1c0aq_76",Z="_suggestionCount_1c0aq_103",ee="_error_1c0aq_110",te="_notfound_1c0aq_119",re="_resultsHeader_1c0aq_142",ae="_libraryGrid_1c0aq_166",ne="_imageLink_1c0aq_172",se="_fadeItem_1c0aq_193",oe="_overlayFavorite_1c0aq_202",ie="_disableLink_1c0aq_209",le="_headerImage_1c0aq_217",n={resultsCard:Y,groupSearch:J,clearBtn:Q,searchResult:V,suggestionBtn:X,suggestionCount:Z,error:ee,notfound:te,resultsHeader:re,libraryGrid:ae,imageLink:ne,fadeItem:se,overlayFavorite:oe,disableLink:ie,headerImage:le};var ce=g('<button aria-label="Clear search input">'),ue=g("<div>An error occurred: "),de=g("<div><h3> photos"),A=g("<div>"),ge=g('<main><div class=contentStack><div><input type=text placeholder="Search objects, places, actions or people..."autofocus></div><div></div><section>'),_e=g("<h1>Search"),he=g("<p>Describe what you remember"),me=g("<button><span></span><span>"),ve=g("<div><h3>No results found</h3><p>No matches for “<!>”. Try another search."),fe=g("<img loading=lazy>",!0,!1,!1),$e=g('<div><img inert alt="Blurred background"><img inert alt="Main visual">');const be=250,Ie=()=>{const{resetParams:f,updatePage:h}=z(),[t,m]=B(""),[o]=G(t,D),[k,q]=B(!1),_=M(()=>({photos:o()?.data??[],suggestCount:o()?.suggestCount??[],totalCount:o()?.data?.[0]?.total_count??0}));P(async()=>{f(),await U(),requestAnimationFrame(()=>q(!0))});const N=$=>{const v=t().trim().split(" ");v[v.length-1]=$,m(v.join(" ")+" ")},E=pe(m,be),I=()=>t()&&h({searchKey:t()});return[u(W,{get left(){return[_e(),he()]}}),(()=>{var $=ge(),v=$.firstChild,b=v.firstChild,R=b.firstChild,w=b.nextSibling,L=w.nextSibling;return i(v,u(y,{get when(){return _().photos.length},get children(){return u(Ce,{get image(){return _().photos[0].thumb_path}})}}),b),R.$$input=e=>E(e.currentTarget.value),i(b,u(y,{get when(){return t()},get children(){var e=ce();return e.$$click=()=>m(""),i(e,O),d(()=>l(e,n.clearBtn)),e}}),null),i(w,u(H,{get each(){return _().suggestCount},children:e=>(()=>{var a=me(),c=a.firstChild,s=c.nextSibling;return a.$$click=()=>N(e.word),i(c,()=>e.word),i(s,()=>e.ndoc),d(r=>{var C=n.suggestionBtn,p=`Suggestion: ${e.word}`,x=n.suggestionCount;return C!==r.e&&l(a,r.e=C),p!==r.t&&S(a,"aria-label",r.t=p),x!==r.a&&l(s,r.a=x),r},{e:void 0,t:void 0,a:void 0}),a})()})),i(v,u(y,{get when(){return o.error},get children(){var e=ue();return e.firstChild,i(e,()=>o.error.message,null),d(()=>l(e,n.error)),e}}),L),i(L,u(y,{get when(){return _().photos.length},get fallback(){return(()=>{var e=ve(),a=e.firstChild,c=a.nextSibling,s=c.firstChild,r=s.nextSibling;return r.nextSibling,i(c,t,r),d(()=>l(e,n.notfound)),e})()},get children(){return[(()=>{var e=de(),a=e.firstChild,c=a.firstChild;return i(a,()=>_().totalCount,c),i(e,u(F,{get href(){return T(()=>!!t())()?`/search/${t()}`:"#"},get classList(){return{[n.disableLink]:!t()||!_().totalCount}},onClick:I,children:"See all"}),null),d(()=>l(e,n.resultsHeader)),e})(),(()=>{var e=A();return i(e,u(H,{get each(){return _().photos},children:(a,c)=>u(F,{get href(){return T(()=>!!t())()?`/search/${t()}/${a.media_id}`:"#"},get classList(){return{[n.imageLink]:!0,[n.fadeItem]:!0,[n.disableLink]:!t()}},get style(){return{"--delay":`${c()%9*35}ms`}},onClick:I,get children(){return[u(y,{get when(){return a.favorite},get children(){var s=A();return d(()=>l(s,n.overlayFavorite)),s}}),(()=>{var s=fe();return d(r=>{var C=a.thumb_path,p=a.caption;return C!==r.e&&S(s,"src",r.e=C),p!==r.t&&S(s,"alt",r.t=p),r},{e:void 0,t:void 0}),s})()]}})})),d(()=>l(e,n.libraryGrid)),e})()]}})),d(e=>{var a=`mainHomePage paddingHeader pageTransition ${k()?"pageEnter":""}`,c=n.groupSearch,s=n.searchResult,r=`${j.storageContainer} ${n.resultsCard}`;return a!==e.e&&l($,e.e=a),c!==e.t&&l(b,e.t=c),s!==e.a&&l(w,e.a=s),r!==e.o&&l(L,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),d(()=>R.value=t()),$})()]},Ce=f=>(()=>{var h=$e(),t=h.firstChild,m=t.nextSibling;return d(o=>{var k=n.headerImage,q=f.image,_=f.image;return k!==o.e&&l(h,o.e=k),q!==o.t&&S(t,"src",o.t=q),_!==o.a&&S(m,"src",o.a=_),o},{e:void 0,t:void 0,a:void 0}),h})();function pe(f,h){let t;return((...m)=>{clearTimeout(t),t=setTimeout(()=>f(...m),h)})}K(["input","click"]);export{Ie as default};

import{b as p,o as g,a as n,t as m,i as h,d as l,e as _,s as v,A as $,f as M,u as b,c as y,M as f,I as V,D as z,S as T}from"./index-BvSQAnfI.js";import R from"./NotFound-BxO3YEod.js";import{L as E}from"./Loading-CfSZg7CJ.js";import{f as I}from"./fetching-CJXmvtht.js";import{u as C}from"./ManageUrl-C3xxHPBd.js";import{n as w}from"./helper-CM3Kw7rw.js";const k="_groupContainer_1ci6z_7",P="_mediaContainer_1ci6z_18",A="_monthViewContainer_1ci6z_19",F="_overlayTitle_1ci6z_42",L="_cardEnter_1ci6z_68",N="_titleMonthView_1ci6z_77",S="_overlayTime_1ci6z_83",Y="_years_1ci6z_91",o={groupContainer:k,mediaContainer:P,monthViewContainer:A,overlayTitle:F,cardEnter:L,titleMonthView:N,overlayTime:S,years:Y};var q=m("<div inert><h3>"),x=m("<div inert>"),D=m('<img inert loading=lazy alt="Year Photos">',!0,!1,!1);const U=i=>{const t=()=>i.photo,[s,a]=p(!1),{params:r,updatePage:u}=C();let c;return g(()=>{requestAnimationFrame(()=>{a(!0),!(!r.year||!c)&&c.scrollIntoView({behavior:"instant",block:"center"})})}),n($,{ref:e=>{t().create_year===r.year&&(c=e)},get class(){return`${o.mediaContainer} ${s()?o.cardEnter:""}`},onClick:()=>u({year:t().create_year,month:t().create_month}),href:"/library/month",get children(){return[(()=>{var e=q(),d=e.firstChild;return h(d,()=>t().create_year),l(()=>_(e,o.overlayTitle)),e})(),(()=>{var e=x();return h(e,()=>w(t().create_month)),l(()=>_(e,`${o.overlayTime} ${o.years}`)),e})(),(()=>{var e=D();return l(()=>v(e,"src",t().thumb_path)),e})()]}})};var B=m("<h3 inert> "),G=m('<img inert loading=lazy alt="Month Photos">',!0,!1,!1);const H=i=>{const t=()=>i.photo,[s,a]=p(!1),{params:r,updatePage:u}=C();let c;return g(()=>{requestAnimationFrame(()=>{a(!0),!(!r.year||!r.month||!c)&&c.scrollIntoView({behavior:"instant",block:"center"})})}),n($,{ref:e=>{t().create_year===r.year&&t().create_month===r.month&&(c=e)},get class(){return`${o.monthViewContainer} ${s()?o.cardEnter:""}`},onClick:()=>u({year:t().create_year,month:t().create_month}),href:"/library/all",get children(){return[(()=>{var e=B(),d=e.firstChild;return h(e,()=>w(t().create_month),d),h(e,()=>t().create_year,null),l(()=>_(e,o.titleMonthView)),e})(),(()=>{var e=G();return l(()=>v(e,"src",t().thumb_path)),e})()]}})};var K=m("<main>");const ee=()=>{const[i]=M(I),t=b(),s=y(()=>t.pathname==="/library/"),a=y(()=>{const r=i();return r?s()?j(r):r:[]});return(()=>{var r=K();return h(r,n(T,{get fallback(){return n(R,{errorCode:"Not Found 404",message:"No data available for the selected period."})},get children(){return[n(f,{get when(){return i.loading},get children(){return n(E,{})}}),n(f,{get when(){return a().length>0},get children(){return n(V,{get each(){return a()},children:u=>n(z,{get component(){return s()?U:H},get photo(){return u()}})})}})]}})),l(()=>_(r,`mainHomePage ${o.groupContainer}`)),r})()},j=i=>{const t=new Set;return i.filter(s=>{const a=s.create_year;return t.has(a)?!1:(t.add(a),!0)})};export{ee as default};

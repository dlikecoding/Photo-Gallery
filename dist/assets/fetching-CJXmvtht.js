const h=a=>Object.entries(a).filter(([e,t])=>t!=null&&t!=="").map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&"),y=async a=>{switch(a.status){case 401:return window.location.replace("/login");case 400:const e=await a.json();return alert(`${e.error}, please try again!`),[];default:return alert("Something went wrong. Please reload the app!"),""}},i=async a=>{const e=await fetch(a,{method:"GET",credentials:"same-origin"});try{if(e.ok)return await e.json();y(e)}catch(t){console.log(t)}},f=async a=>await i(a),n=async(a,e,t)=>await fetch(a,{method:e,headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)}),u=async()=>await i("/api/v1/medias"),v=async a=>await i(`/api/v1/medias/filter-year?monthInput=${a}`),g=(a,e=0)=>{const t=h({...a,pageNumber:e});return i(`/api/v1/stream?${t}`)},b=async()=>await i("/api/v1/medias/devices"),T=async()=>{const a=await i("/api/v1/album/statistic");return a?a[0]:null},S=async()=>await i("/api/v1/album"),D=async()=>await i("/api/v1/album/collection"),P=async(a,e,t)=>await n("/api/v1/album/add","PUT",{mediaIds:a,albumId:e,albumTitle:t}),U=async(a,e)=>await n("/api/v1/album/remove","PUT",{mediaIds:a,albumId:e}),E=async(a,e,t)=>await n("/api/v1/medias","PUT",{mediaIds:a,updateKey:e,updateValue:t}),O=async a=>await n("/api/v1/medias","DELETE",{mediaIds:a}),$=async a=>await n("/api/v1/medias/download","POST",{mediaIds:a}),C=async()=>await i("/api/v1/medias/recently"),I=async()=>await i("/api/v1/medias/merge-all"),R=async(a,e)=>await n("/api/v1/media/caption","PUT",{mediaId:a,caption:e}),x=async(a,e)=>await n("/api/v1/media/live-frame","PUT",{mediaId:a,framePos:e}),A=async a=>await i(`/api/v1/media?id=${a}`),j=async(a,e)=>await n("/api/v1/media/update-date","PUT",{mediaId:a,date_iso:e}),o=async(a,e)=>{try{if(!a.ok){const d=await a.json();return e("mesg",d.error)}if(!a.body)throw new Error("Stream response body is empty");const t=a.body.getReader(),c=new TextDecoder;let s="";for(;;){const{value:d,done:w}=await t.read();if(w)break;s+=c.decode(d,{stream:!0});let r=s.indexOf(`
`);for(;r!==-1;){const m=s.slice(0,r).trim();s=s.slice(r+1),m&&e("mesg",m),r=s.indexOf(`
`)}}const p=c.decode(),l=(s+p).trim();l&&e("mesg",l)}catch(t){console.log("Error import/upload media",t),e("mesg",`âš ï¸ ${t}`)}finally{e("isRunning",!1)}},k=async a=>await n("/api/v1/medias/merge-videos","POST",{mediaIds:a}),L=async(a,e,t)=>{const c=await fetch(`/api/v1/upload?aimode=${t}`,{method:"POST",credentials:"same-origin",body:e});await o(c,a)},G=async()=>await i("/api/v1/admin/dashboard"),F=async(a,e,t)=>{const c=await n(`/api/v1/admin/${t}`,"POST",{sourcePath:e.path,aimode:e.aimode});await o(c,a)},H=async a=>await n("/api/v1/admin/changeStatus","PUT",{userEmail:a}),q=async a=>{const e=await fetch("/api/v1/admin/backup",{method:"GET",credentials:"same-origin"});await o(e,a)},z=async()=>await i("/api/v1/admin/restore"),B=async a=>{const e=await fetch("/api/v1/admin/storageOptimize",{method:"GET",credentials:"same-origin"});await o(e,a)},M=async a=>{const e=await fetch("/api/v1/admin/reindex",{method:"GET",credentials:"same-origin"});await o(e,a)},N=async a=>{const e=await fetch("/api/v1/admin/rescan-thumb",{method:"GET",credentials:"same-origin"});await o(e,a)},V=async()=>await i("/api/v1/admin/all-logs"),Y=async()=>await n("/api/v1/admin/all-logs","DELETE",{}),_=async()=>await i("/api/v1/search/refreshView"),J=async a=>await i(`/api/v1/search?keywords=${a}`),Q=async()=>await i("/api/v1/user/serverCapacity");export{q as A,z as B,B as C,N as D,M as E,H as F,F as G,G as H,n as I,f as a,T as b,D as c,J as d,_ as e,u as f,Q as g,L as h,b as i,k as j,P as k,S as l,U as m,$ as n,O as o,j as p,R as q,A as r,C as s,I as t,E as u,x as v,v as w,g as x,Y as y,V as z};

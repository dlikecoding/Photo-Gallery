import{b as se,f as Z,g as ce,o as ue,h as ve,j as me,a as g,t as f,i as c,F as N,d as z,e as i,k as ee,l as G,n as _e}from"./index-BvSQAnfI.js";import{I as te,a as he,b as ye,c as be,d as Ce,e as ge,f as fe}from"./index-CEh71puf.js";import{H as pe}from"./Header-9gxCup_c.js";import{u as Se}from"./ManageUrl-C3xxHPBd.js";import{a as Te,b as ze,c as Ie}from"./fetching-CJXmvtht.js";import{s as xe}from"./startAuthentication-mwDUkj2u.js";import{f as $e}from"./helper-CM3Kw7rw.js";import"./toAuthenticatorAttachment-BAxCDoik.js";const we="_section_1901z_30",He="_sectionHeader_1901z_34",Pe="_sectionTitle_1901z_42",ke="_sectionCaption_1901z_48",Be="_pinnedRow_1901z_55",Oe="_pinnedCard_1901z_62",Ae="_pinnedThumb_1901z_74",Me="_pinnedMeta_1901z_83",Re="_pinnedTitle_1901z_89",We="_pinnedCount_1901z_94",Ee="_cardColumn_1901z_145",De="_memoryCard_1901z_170",Fe="_memoryThumb_1901z_181",Ne="_memoryBody_1901z_189",Ge="_memoryTitle_1901z_198",Ue="_memorySubtitle_1901z_206",je="_memoryDate_1901z_212",Je="_chevronIcon_1901z_218",Le="_mapCard_1901z_226",qe="_mapIconWrapper_1901z_241",Ke="_mapBody_1901z_251",Qe="_mapTitle_1901z_255",Ve="_mapSubtitle_1901z_260",Xe="_utilitiesGrid_1901z_267",Ye="_utilityCard_1901z_273",Ze="_utilityIconWrapper_1901z_285",et="_utilityBody_1901z_295",tt="_bodyHeader_1901z_299",it="_utilityTitle_1901z_308",nt="_utilityTitleSec_1901z_313",ot="_utilitySubtitle_1901z_319",t={section:we,sectionHeader:He,sectionTitle:Pe,sectionCaption:ke,pinnedRow:Be,pinnedCard:Oe,pinnedThumb:Ae,pinnedMeta:Me,pinnedTitle:Re,pinnedCount:We,cardColumn:Ee,memoryCard:De,memoryThumb:Fe,memoryBody:Ne,memoryTitle:Ge,memorySubtitle:Ue,memoryDate:je,chevronIcon:Je,mapCard:Le,mapIconWrapper:qe,mapBody:Ke,mapTitle:Qe,mapSubtitle:Ve,utilitiesGrid:Xe,utilityCard:Ye,utilityIconWrapper:Ze,utilityBody:et,bodyHeader:tt,utilityTitle:it,utilityTitleSec:nt,utilitySubtitle:ot},at=async A=>{try{const I=await Te(`/api/v1/auth/init-auth?email=${A.userEmail}`);if(!I)return!1;let B;try{B=await xe({optionsJSON:I})}catch{return!1}return!!B}catch(I){return console.error("Authentication failed",I),alert("Authentication failed. Please try again."),!1}};var lt=f("<section><div><h2>Trips</h2><span>Places you explored</span></div><div>"),rt=f("<section><div><h2>Utilities</h2><span>Tools to manage your library</span></div><div>"),dt=f("<main><div class=contentStack><section><div><h2>My Albums</h2><span>Quick access to favorites</span></div><div></div></section><section><div><h2>Map</h2><span>Explore your photos by place</span></div><button><div></div><div><div>Open map view</div><div>See trips, memories, and people laid out across the world."),st=f("<h1>Collection"),ct=f("<p>Highlights, people, trips, and more"),ut=f("<button><div></div><div><span>Create Album"),vt=f("<button><div></div><div><span></span><span>"),mt=f("<button><div></div><div><h3></h3><p>, </p><p> â€¢ "),_t=f("<button><div></div><div><div><div></div><div></div></div><div>");const ht={import:{page:"import",title:"Imports",subtitle:"Photos imported from your device",icon:fe,setParam:{sortKey:"upload_at",sortOrder:1}},favorite:{page:"favorite",title:"Favorites",subtitle:"What you love the most",icon:ge,setParam:{favorite:1}},duplicate:{page:"duplicate",title:"Duplicates",subtitle:"Review and merge similar photos",icon:Ce,setParam:{duplicate:1}},hidden:{page:"hidden",title:"Hiddens",subtitle:"Hidden items in your library",icon:be,setParam:{hidden:1}},deleted:{page:"deleted",title:"Deleted",subtitle:"Items removed in the last 30 days",icon:ye,setParam:{deleted:1}}},zt=()=>{const{resetParams:A,updatePage:I}=Se(),[B,U]=se(!1),[j]=Z(ze),[O,ie]=ce({albums:[],locations:[]});Z(async()=>{try{const _=await Ie();return _?(ie(_),_):[]}catch(_){console.error("Error fetching server capacity:",_)}}),ue(()=>{A(),requestAnimationFrame(()=>U(!0))});const ne=ve(),{loggedUser:oe}=me(),M=(_,T)=>{const x=T?`/collection/${_}/${T}`:`/collection/${_}`;ne(x)},ae=async _=>{if((_.page==="hidden"||_.page==="deleted")&&!await at(oe))return alert("Authentication failed");I(_.setParam),M(_.page)};return[g(pe,{get left(){return[st(),ct()]}}),(()=>{var _=dt(),T=_.firstChild,x=T.firstChild,R=x.firstChild,J=R.firstChild,le=J.nextSibling,L=R.nextSibling,W=x.nextSibling,E=W.firstChild,q=E.firstChild,re=q.nextSibling,D=E.nextSibling,F=D.firstChild,K=F.nextSibling,Q=K.firstChild,de=Q.nextSibling;return c(L,g(G,{get when(){return O.albums.length>0},get fallback(){return(()=>{var e=ut(),u=e.firstChild,h=u.nextSibling,b=h.firstChild;return z(l=>{var n=t.pinnedCard,o=t.pinnedThumb,a=t.pinnedMeta,s=t.pinnedTitle;return n!==l.e&&i(e,l.e=n),o!==l.t&&i(u,l.t=o),a!==l.a&&i(h,l.a=a),s!==l.o&&i(b,l.o=s),l},{e:void 0,t:void 0,a:void 0,o:void 0}),e})()},get children(){return g(N,{get each(){return O.albums},children:e=>(()=>{var u=vt(),h=u.firstChild,b=h.nextSibling,l=b.firstChild,n=l.nextSibling;return u.$$click=()=>M("album",e.album_id),c(l,()=>e.title),c(n,()=>e.media_count),z(o=>{var a=t.pinnedCard,s=t.pinnedThumb,v=`url(${e.thumb_path})`,r=t.pinnedMeta,C=t.pinnedTitle,y=t.pinnedCount;return a!==o.e&&i(u,o.e=a),s!==o.t&&i(h,o.t=s),v!==o.a&&ee(h,"background-image",o.a=v),r!==o.o&&i(b,o.o=r),C!==o.i&&i(l,o.i=C),y!==o.n&&i(n,o.n=y),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),u})()})}})),c(T,g(G,{get when(){return O.locations.length>0},get children(){var e=lt(),u=e.firstChild,h=u.firstChild,b=h.nextSibling,l=u.nextSibling;return c(l,g(N,{get each(){return O.locations},children:n=>(()=>{var o=mt(),a=o.firstChild,s=a.nextSibling,v=s.firstChild,r=v.nextSibling,C=r.firstChild,y=r.nextSibling,p=y.firstChild;return o.$$click=()=>M("places",n.location_id),c(v,()=>n.city),c(r,()=>n.city,C),c(r,()=>n.country,null),c(y,()=>$e(n.create_date,"month").toString(),p),c(y,()=>n.media_count,null),c(o,g(te,{get class(){return t.chevronIcon}}),null),z(d=>{var S=t.memoryCard,$=t.memoryThumb,m=`url(${n.thumb_path})`,w=t.memoryBody,H=t.memoryTitle,P=t.memorySubtitle,k=t.memoryDate;return S!==d.e&&i(o,d.e=S),$!==d.t&&i(a,d.t=$),m!==d.a&&ee(a,"background-image",d.a=m),w!==d.o&&i(s,d.o=w),H!==d.i&&i(v,d.i=H),P!==d.n&&i(r,d.n=P),k!==d.s&&i(y,d.s=k),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),o})()})),z(n=>{var o=t.section,a=t.sectionHeader,s=t.sectionTitle,v=t.sectionCaption,r=t.cardColumn;return o!==n.e&&i(e,n.e=o),a!==n.t&&i(u,n.t=a),s!==n.a&&i(h,n.a=s),v!==n.o&&i(b,n.o=v),r!==n.i&&i(l,n.i=r),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}}),W),c(F,g(he,{})),c(D,g(te,{get class(){return t.chevronIcon}}),null),c(T,g(G,{get when(){return j()},get children(){var e=rt(),u=e.firstChild,h=u.firstChild,b=h.nextSibling,l=u.nextSibling;return c(l,g(N,{get each(){return Object.entries(j())},children:([n,o])=>{const a=ht[n],s=a.icon,v=o?Number(o):0;return(()=>{var r=_t(),C=r.firstChild,y=C.nextSibling,p=y.firstChild,d=p.firstChild,S=d.nextSibling,$=p.nextSibling;return r.$$click=()=>{v!==0&&ae(a)},c(C,g(s,{})),c(d,()=>a.title),c(S,v),c($,()=>a.subtitle),z(m=>{var w=t.utilityCard,H=t.utilityIconWrapper,P=t.utilityBody,k=t.bodyHeader,V=t.utilityTitle,X=t.utilityTitleSec,Y=t.utilitySubtitle;return w!==m.e&&i(r,m.e=w),H!==m.t&&i(C,m.t=H),P!==m.a&&i(y,m.a=P),k!==m.o&&i(p,m.o=k),V!==m.i&&i(d,m.i=V),X!==m.n&&i(S,m.n=X),Y!==m.s&&i($,m.s=Y),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),r})()}})),z(n=>{var o=t.section,a=t.sectionHeader,s=t.sectionTitle,v=t.sectionCaption,r=t.utilitiesGrid;return o!==n.e&&i(e,n.e=o),a!==n.t&&i(u,n.t=a),s!==n.a&&i(h,n.a=s),v!==n.o&&i(b,n.o=v),r!==n.i&&i(l,n.i=r),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}}),null),z(e=>{var u=`mainHomePage paddingHeader pageTransition ${B()?"pageEnter":""}`,h=t.section,b=t.sectionHeader,l=t.sectionTitle,n=t.sectionCaption,o=t.pinnedRow,a=t.section,s=t.sectionHeader,v=t.sectionTitle,r=t.sectionCaption,C=t.mapCard,y=t.mapIconWrapper,p=t.mapBody,d=t.mapTitle,S=t.mapSubtitle;return u!==e.e&&i(_,e.e=u),h!==e.t&&i(x,e.t=h),b!==e.a&&i(R,e.a=b),l!==e.o&&i(J,e.o=l),n!==e.i&&i(le,e.i=n),o!==e.n&&i(L,e.n=o),a!==e.s&&i(W,e.s=a),s!==e.h&&i(E,e.h=s),v!==e.r&&i(q,e.r=v),r!==e.d&&i(re,e.d=r),C!==e.l&&i(D,e.l=C),y!==e.u&&i(F,e.u=y),p!==e.c&&i(K,e.c=p),d!==e.w&&i(Q,e.w=d),S!==e.m&&i(de,e.m=S),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),_})()]};_e(["click"]);export{zt as default};
